{"ast":null,"code":"import { SET_ROW_ACTION, SET_COL_ACTION, SET_PRO_ACTION, SET_DURATION_ACTION, TOGGLE_SETTING_ACTION, SELECT_CHANGE_ACTION, SET_TIME_ACTION, IS_IN_GAME_ACTION, RESET_SETTING_ACTION, RESTART_GAME_ACTION, RIGHT_CLICK_CELL_ACTION, LEFT_CLICK_CELL_ACTION, RUN_OUT_OF_TIME_ACTION, SET_TOOL_ACTION } from './Action';\nimport { levels } from './Functions';\nexport const initialState = {\n  //specific\n  'level': 0,\n  'row': 0,\n  'col': 0,\n  'proportion': 0,\n  'mine': 0,\n  'flag': 0,\n  'setTime': {\n    isTime: true,\n    duration: 0\n  },\n  'cells': [],\n  //general\n  'tool': {\n    'style': {\n      display: 'none',\n      top: 0,\n      left: 0\n    },\n    'index': null\n  },\n  'hidden': false,\n  'isInGame': false,\n  'firstClick': true,\n  'gameOver': false,\n  'message': '',\n  'logError': ''\n};\nexport const reducer = (state, action) => {\n  console.log(action);\n  switch (action.type) {\n    case SET_ROW_ACTION:\n      return {\n        ...state,\n        'row': action.payload,\n        'mine': Math.floor((state.col + action.payload) / 2 * state.proportion),\n        'flag': Math.floor((state.col + action.payload) / 2 * state.proportion),\n        'cells': new Array(action.payload * state.col).fill({\n          opened: false,\n          flag: false,\n          isMine: false,\n          mine: 0\n        }),\n        'tool': {\n          ...state.tool,\n          'style': {\n            ...state.style,\n            display: 'none'\n          }\n        }\n      };\n    case SET_COL_ACTION:\n      return {\n        ...state,\n        'col': action.payload,\n        'mine': Math.floor((state.row + action.payload) / 2 * state.proportion),\n        'flag': Math.floor((state.row + action.payload) / 2 * state.proportion),\n        'cells': new Array(action.payload * state.row).fill({\n          opened: false,\n          flag: false,\n          isMine: false,\n          mine: 0\n        }),\n        'tool': {\n          ...state.tool,\n          'style': {\n            ...state.style,\n            display: 'none'\n          }\n        }\n      };\n    case SET_PRO_ACTION:\n      return {\n        ...state,\n        'proportion': action.payload,\n        'mine': Math.floor((state.col + state.row) / 2 * action.payload),\n        'flag': Math.floor((state.col + state.row) / 2 * action.payload),\n        'tool': {\n          ...state.tool,\n          'style': {\n            ...state.style,\n            display: 'none'\n          }\n        }\n      };\n    case SET_TIME_ACTION:\n      return {\n        ...state,\n        'setTime': {\n          ...state.setTime,\n          'isTime': !state.setTime.isTime\n        },\n        'tool': {\n          ...state.tool,\n          'style': {\n            ...state.style,\n            display: 'none'\n          }\n        }\n      };\n    case SET_DURATION_ACTION:\n      return {\n        ...state,\n        'setTime': {\n          ...state.setTime,\n          'duration': action.payload\n        },\n        'tool': {\n          ...state.tool,\n          'style': {\n            ...state.style,\n            display: 'none'\n          }\n        }\n      };\n    case SELECT_CHANGE_ACTION:\n      return {\n        ...state,\n        'tool': {\n          ...state.tool,\n          'style': {\n            ...state.style,\n            display: 'none'\n          }\n        },\n        ...levels[action.payload]\n      };\n    case TOGGLE_SETTING_ACTION:\n      return {\n        ...state,\n        'hidden': !state.hidden\n      };\n    case IS_IN_GAME_ACTION:\n      return {\n        ...state,\n        'isInGame': true,\n        'hidden': true\n      };\n    case RESET_SETTING_ACTION:\n      return {\n        ...state,\n        ...levels[4],\n        'isInGame': false\n      };\n    case LEFT_CLICK_CELL_ACTION:\n      return {\n        ...state,\n        ...action.payload,\n        'firstClick': false\n      };\n    case RIGHT_CLICK_CELL_ACTION:\n      return {\n        ...state,\n        ...action.payload\n      };\n    case RESTART_GAME_ACTION:\n      return {\n        ...state,\n        ...initialState,\n        ...levels[state.level]\n      };\n    case RUN_OUT_OF_TIME_ACTION:\n      return {\n        ...state,\n        'message': action.payload,\n        'gameOver': true\n      };\n    case SET_TOOL_ACTION:\n      return {\n        ...state,\n        'tool': {\n          ...state.tool,\n          ...action.payload\n        }\n      };\n    default:\n      throw new Error('Invalid action');\n  }\n};","map":{"version":3,"names":["SET_ROW_ACTION","SET_COL_ACTION","SET_PRO_ACTION","SET_DURATION_ACTION","TOGGLE_SETTING_ACTION","SELECT_CHANGE_ACTION","SET_TIME_ACTION","IS_IN_GAME_ACTION","RESET_SETTING_ACTION","RESTART_GAME_ACTION","RIGHT_CLICK_CELL_ACTION","LEFT_CLICK_CELL_ACTION","RUN_OUT_OF_TIME_ACTION","SET_TOOL_ACTION","levels","initialState","isTime","duration","display","top","left","reducer","state","action","console","log","type","payload","Math","floor","col","proportion","Array","fill","opened","flag","isMine","mine","tool","style","row","setTime","hidden","level","Error"],"sources":["D:/workspace/test/findminegame/src/Pages/MinesweeperPage/Reducer.js"],"sourcesContent":["import {\r\n    SET_ROW_ACTION,\r\n    SET_COL_ACTION,\r\n    SET_PRO_ACTION,\r\n    SET_DURATION_ACTION,\r\n    TOGGLE_SETTING_ACTION,\r\n    SELECT_CHANGE_ACTION,\r\n    SET_TIME_ACTION,\r\n    IS_IN_GAME_ACTION,\r\n    RESET_SETTING_ACTION,\r\n    RESTART_GAME_ACTION,\r\n    RIGHT_CLICK_CELL_ACTION,\r\n    LEFT_CLICK_CELL_ACTION,\r\n    RUN_OUT_OF_TIME_ACTION,\r\n    SET_TOOL_ACTION\r\n} from './Action';\r\nimport {\r\n    levels\r\n} from './Functions';\r\n\r\nexport const initialState = {\r\n    //specific\r\n    'level': 0,\r\n    'row': 0,\r\n    'col': 0,\r\n    'proportion': 0,\r\n    'mine': 0,\r\n    'flag': 0,\r\n    'setTime': {\r\n        isTime: true,\r\n        duration: 0\r\n    },\r\n    'cells': [],\r\n    \r\n    //general\r\n    'tool': {\r\n        'style' : {\r\n            display: 'none',\r\n            top: 0,\r\n            left: 0\r\n        },\r\n        'index': null\r\n    },\r\n    'hidden': false,\r\n    'isInGame': false,\r\n    'firstClick': true,\r\n    'gameOver': false,\r\n    'message': '',\r\n    'logError': ''\r\n}\r\n\r\nexport const reducer = (state, action) => {\r\n\r\n    console.log(action)\r\n    switch (action.type) {\r\n        case SET_ROW_ACTION:\r\n            return {\r\n                ...state,\r\n                'row': action.payload,\r\n                'mine': Math.floor((state.col + action.payload) / 2 * state.proportion),\r\n                'flag': Math.floor((state.col + action.payload) / 2 * state.proportion),\r\n                'cells': new Array(action.payload * state.col).fill({\r\n                    opened: false,\r\n                    flag: false,\r\n                    isMine: false,\r\n                    mine: 0\r\n                }),\r\n                'tool': {\r\n                    ...state.tool,\r\n                    'style': {\r\n                        ...state.style,\r\n                        display: 'none'\r\n                    }\r\n                }\r\n            }\r\n        case SET_COL_ACTION:\r\n            return {\r\n                ...state,\r\n                'col': action.payload,\r\n                'mine': Math.floor((state.row + action.payload) / 2 * state.proportion),\r\n                'flag': Math.floor((state.row + action.payload) / 2 * state.proportion),\r\n                'cells': new Array(action.payload * state.row).fill({\r\n                    opened: false,\r\n                    flag: false,\r\n                    isMine: false,\r\n                    mine: 0\r\n                }),\r\n                'tool': {\r\n                    ...state.tool,\r\n                    'style': {\r\n                        ...state.style,\r\n                        display: 'none'\r\n                    }\r\n                }\r\n            }\r\n        case SET_PRO_ACTION:\r\n            return {\r\n                ...state,\r\n                'proportion': action.payload,\r\n                'mine': Math.floor((state.col + state.row) / 2 * action.payload),\r\n                'flag': Math.floor((state.col + state.row) / 2 * action.payload),\r\n                'tool': {\r\n                    ...state.tool,\r\n                    'style': {\r\n                        ...state.style,\r\n                        display: 'none'\r\n                    }\r\n                }\r\n            }\r\n        case SET_TIME_ACTION:\r\n            return {\r\n                ...state,\r\n                'setTime': {\r\n                    ...state.setTime,\r\n                    'isTime': !state.setTime.isTime\r\n                },\r\n                'tool': {\r\n                    ...state.tool,\r\n                    'style': {\r\n                        ...state.style,\r\n                        display: 'none'\r\n                    }\r\n                }\r\n            }\r\n        case SET_DURATION_ACTION:\r\n            return {\r\n                ...state,\r\n                'setTime': {\r\n                    ...state.setTime,\r\n                    'duration': action.payload\r\n                },\r\n                'tool': {\r\n                    ...state.tool,\r\n                    'style': {\r\n                        ...state.style,\r\n                        display: 'none'\r\n                    }\r\n                }\r\n            }\r\n        case SELECT_CHANGE_ACTION:\r\n            return {\r\n                ...state,\r\n                'tool': {\r\n                    ...state.tool,\r\n                    'style': {\r\n                        ...state.style,\r\n                        display: 'none'\r\n                    }\r\n                },\r\n                ...levels[action.payload]\r\n            }\r\n        case TOGGLE_SETTING_ACTION:\r\n            return {\r\n                ...state,\r\n                'hidden': !state.hidden\r\n            }\r\n        case IS_IN_GAME_ACTION:\r\n            return {\r\n                ...state,\r\n                'isInGame': true,\r\n                'hidden': true\r\n            }\r\n        case RESET_SETTING_ACTION:\r\n            return {\r\n                ...state,\r\n                ...levels[4],\r\n                'isInGame': false\r\n            }\r\n        case LEFT_CLICK_CELL_ACTION:\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n                'firstClick': false\r\n            }\r\n        case RIGHT_CLICK_CELL_ACTION:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        case RESTART_GAME_ACTION: \r\n            return {\r\n                ...state,\r\n                ...initialState,\r\n                ...levels[state.level]\r\n            }\r\n        case RUN_OUT_OF_TIME_ACTION:\r\n            return {\r\n                ...state,\r\n                'message': action.payload,\r\n                'gameOver': true\r\n            }\r\n        case SET_TOOL_ACTION:\r\n            return {\r\n                ...state,\r\n                'tool': {\r\n                    ...state.tool,\r\n                    ...action.payload\r\n                }\r\n            }\r\n        default:\r\n            throw new Error('Invalid action')\r\n    }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}